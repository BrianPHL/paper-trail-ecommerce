{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
<h1>{{ title }}</h1>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 20px 0;">
    <div style="background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="margin: 0 0 10px 0; color: #417690;">Total Orders</h3>
        <p style="font-size: 24px; font-weight: bold; margin: 0;">{{ total_orders }}</p>
    </div>
    
    <div style="background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="margin: 0 0 10px 0; color: #5cb85c;">Total Revenue</h3>
        <p style="font-size: 24px; font-weight: bold; margin: 0; color: #5cb85c;">PHP {{ total_revenue|floatformat:2 }}</p>
    </div>
</div>

<div style="background: #fff; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <h2>Orders by Status</h2>
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background: #f0f0f0;">
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Status</th>
                <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Count</th>
                <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Revenue</th>
            </tr>
        </thead>
        <tbody>
            {% for status in orders_by_status %}
            <tr>
                <td style="padding: 12px; border-bottom: 1px solid #eee; text-transform: capitalize;">{{ status.status }}</td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #eee; font-weight: bold;">{{ status.count }}</td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #eee;">PHP {{ status.revenue|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div style="background: #fff; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
    <h2>Recent Orders</h2>
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background: #f0f0f0;">
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Order ID</th>
                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Customer</th>
                <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Items</th>
                <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Total</th>
                <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Status</th>
                <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Date</th>
                <th style="padding: 12px; text-align: center; border-bottom: 2px solid #ddd;">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for order in recent_orders %}
            <tr>
                <td style="padding: 12px; border-bottom: 1px solid #eee;">#{{ order.id }}</td>
                <td style="padding: 12px; border-bottom: 1px solid #eee;">{{ order.full_name }}</td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #eee;">{{ order.items.count }}</td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #eee; font-weight: bold;">PHP {{ order.total_amount|floatformat:2 }}</td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #eee; text-transform: capitalize;">{{ order.status }}</td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #eee;">{{ order.placed_at|date:"Y-m-d H:i" }}</td>
                <td style="padding: 12px; text-align: center; border-bottom: 1px solid #eee;">
                    <a href="{% url 'admin:shop_order_change' order.id %}" style="color: #417690; text-decoration: none;">View</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div style="margin: 20px 0;">
    <a href="{% url 'admin:shop_order_changelist' %}" class="button" style="background: #417690; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block;">View All Orders</a>
    <a href="{% url 'admin:index' %}" class="button" style="background: #ddd; color: #333; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin-left: 10px;">Back to Admin</a>
</div>

{% endblock %}
